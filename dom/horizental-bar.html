<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <p>Drag the bar to change its width:</p>
  <div style="background: orange; width: 60px; height: 20px">
  </div>
</body>
<script type="xxx">
  var lastX;
  var rect = document.querySelector('div')
  rect.addEventListener('mousedown', function(event) {
    if (event.which == 1) {
      lastX = event.pageX
      addEventListener('mousemove', moved)
      event.preventDefault()
    }
  })
  function buttonPressed(event) {
    if (event.buttons == null) {
      return event.which != 0
    } else {
      return event.buttons != 0
    }
  }
  function moved(event) {
    if (!buttonPressed(event)) {
      removeEventListener('mousemove', moved)
    } else {
      var dist = event.pageX - lastX
      var newWidth = Math.max(10, rect.offsetWidth + dist)
      rect.style.width = newWidth + 'px'
      lastX = event.pageX
    }
  }

</script>
<script>
  var initX;
  var initWidth;
  var rect = document.querySelector('div')
  rect.addEventListener('mousedown', function(event) {
    if (event.which == 1) {
      initX = event.pageX  // 初始鼠标位置
      initWidth = rect.offsetWidth  // 初始元素宽度
      addEventListener('mousemove', moved)
      event.preventDefault()
    }
  })
  // function buttonPressed(event) {
  //   if (event.buttons == null) {
  //     return event.which != 0
  //   } else {
  //     return event.buttons != 0
  //   }
  // }
  function moved(event) {
    if (event.buttons == 0) {
      removeEventListener('mousemove', moved)
    } else {
      var dist = event.pageX - initX // 鼠标相对初始的移动距离
      var newWidth = Math.max(10, initWidth + dist)
      rect.style.width = newWidth + 'px'
    }
  }

</script>
</html>
